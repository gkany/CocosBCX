## 1. 关于区块链

``` text
在《经济学人》杂志中对区块链的定义：“区块链是信任的机器”。

区块链最大的核心创新在于去中心化的解决信任问题，不需要再去信任和依靠第三方机构的情况下进行价值转移。其中，智能合约起到了重要的作用。它是一套数字形式定义的合约，帮助合约参与方执行完成任务的协议，节省了时间和繁琐的步骤。
```



## 2.  存在的问题

> 区块链无法主动获取现实世界的数据。



## 3. 预言机出现的背景

智能合约存在外部数据的交互需求。比如，一些像是股票或者币价的实时价格数据，天气预报，市场预测等其他数据。

``` text
区块链上的智能合约和去中心化应用（DAPP）对外界数据拥有交互需求。

区块链是一个封闭的环境，链上是无法主动获取链外真实世界的数据。主要是因为区块链无法主动发起Network call（网络调用）而链上智能合约是被动接收数据的。其次，智能合约其实并不“智能”，它只是在满足相应条件下，才达到触发状态的程序。同时，智能合约最终的执行需要合约参与方的私钥签署，智能合约本身没有办法自动执行。

当智能合约的触发条件取决于区块链外信息时，这些信息需先写入区块链内记录。此时需要通过预言机来提供这些区块链外的信息。

区块链是基于共识的网络，所运行的智能合约也要求一定要是确定性的程序, 每笔交易和区块处理过后，每个节点必须要达到相同的状态。但是数据本身具有复杂性和多样性，这也是为什么预言机为了契合区块链的共识机制，除了搜集数据还有一步数据验证的步骤才将最后的“确定性”信息反馈给智能合约。
```



## 4. 什么是预言机

预言机就是一种单向的数字代理，可以查找和验证真实世界的数据，并以加密的方式将信息提交给智能合约。

预言机就好比区块链世界中的一个第三方数据代理商。

``` text
举例来说，假设现实世界中的“数据源”和区块链中的“数据接口”，是两个使用不同语言的国家，预言机就是中间的翻译官。通过预言机智能合约就可以和链外数据进行无障碍交流。
```



## 5. 预言机运行原理

* 基本描述：
  * 当区块链上的某个智能合约有数据交互需求时，预言机在接收到需求后，帮助智能合约在链外收集外界数据，验证后再将获取的数据反馈回链上的智能合约。

* 详细实现：
  * 外部数据源服务在区块链上部署了区块链预言机合约，提供异步查询互联网数据接口供用户合约使用。正常情况下，用户合约调用预言机合约发起查询请求后，预言机合约在 1~3 个区块内就能得到外部数据源服务取回的数据，然后回调用户合约传入数据。
    ![在这里插入图片描述](https://img-blog.csdnimg.cn/20190717095230742.png)



## 6. 应用场景

应用场景
适用于以下任意场景：

* 智能合约需要可信访问 Web 数据。

* 智能合约通过调用 Open API 使用互联网服务。

* 智能合约需要与外部系统交互。

* 智能合约依赖公共现实事件，如天气、赛事信息、航班信息等。


具体的：

* 金融衍生品交易平台

  衍生品交易平台提供金融类的智能合约，允许用户做空或者做多背后的资产，例如Market Protocol, Decentralized Derivatives Association, DyDx Protocol 等都提供类似的服务。这类智能合约需要实时从链外获取资产价格，来确定参与各方的收益和损失，以及触发平仓交易等。

* 稳定货币
  稳定货币是一种和法币有稳定兑换率的加密货币，稳定货币可以作为价值的储藏和交易的中间媒介，因此又被誉为数字货币世界里的圣杯。 这里的稳定货币并不是指tether或者digix那种由一个中心化机构发行的货币，而应该是一种去中心化的被算法自动控制的加密货币，包括bitUSD, Dai等以加密资产抵押物为基础的稳定货币，和Basecoin, kUSD等以算法银行为基础的稳定货币。所有的稳定货币都需要Oralce的帮助来获取外部世界稳定货币本身和锚定资产的兑换率等数据

* 借贷平台
  SALT Lending, ETHlend等去中心化P2P借贷平台允许匿名的用户用区块链上的加密资产抵押，来借贷出法币或者加密资产。 这类应用需要使用Oracle在贷款生成时提供价格数据， 并且能监控加密抵押物的保证金比率，在保证金不足的时候发出警告并触发清算程序。 借贷平台也能用Oracle来导入借款人的社交和信用和身份信息来确定不同的贷款利率

* 保险应用
  Etherisc正在建立一个高效透明低消耗的去中心化的保险应用平台， 包括航空延误险， 农作物保险等等。用户以ether支付保费，购买保险，并根据保险协议得到自动赔付。Oracle能为这类应用引入外部数据源和事件， 帮助去中心化的保险产品作出赔付的决定，并能安排未来的自动赔付

* 赌场应用
  由于区块链技术保证的透明， 即时的安全转账，以及相对传统线上赌场高达15%的零庄家优势, 涌现了一大批如Edgeless, DAO.Casino, FunFair等去中心化赌场。任何在线赌场游戏的核心是产生不可预测的，可验证的随机数。 但是在链内纯确定性的环境下， 随机数的生成是很困难的。 Oracle可以从链外注入一个安全可靠的无偏的可验证随机熵源给赌场合约使用。

* 预测市场
  去中心化的预测市场比如Augur, Gnosis等等，他们应用了群体的智慧来预测真实世界的结果, 比如总统选举和体育结果竞猜。在投票结果被用户质疑的时候，需要Oracle提供真实的最终结果。
  无信任环境下如何验证身份
  很多区块链应用需要通过Oracle从链外获取用户的身份数据，信用数据，或者社交媒体数据等。

* 快递追踪和IoT应用
  真实世界中的快递寄送或到达信息可以通过Oracle被传递到链上，触发链上智能合约的自动付款。对于区块链上的IoT应用, 也需要Oracle把链外的传感信息传到链上，让智能合约验证并触发下一步的行为。
